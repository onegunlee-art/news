# 카카오 REST API 연동 문제 해결 가이드

## ❌ 오류: "REST API가 연동되어 있지 않습니다"

이 오류는 카카오 개발자 콘솔에서 발생하는 메시지로, 다음 설정이 누락되었을 때 나타납니다.

## ✅ 해결 방법 (단계별)

### 1단계: 카카오 로그인 제품 활성화

1. [Kakao Developers](https://developers.kakao.com) 접속
2. **내 애플리케이션** 선택
3. **제품 설정** → **카카오 로그인** 클릭
4. **활성화 설정** → **ON**으로 변경
5. **저장** 클릭

### 2단계: 플랫폼 등록 (Web)

1. **앱 설정** → **플랫폼** 메뉴로 이동
2. **Web 플랫폼 등록** 클릭
3. 사이트 도메인 입력:
   ```
   http://ailand.dothome.co.kr
   ```
4. **저장** 클릭

### 3단계: Redirect URI 등록

1. **제품 설정** → **카카오 로그인** → **Redirect URI** 섹션
2. 다음 URI를 정확히 입력:
   ```
   http://ailand.dothome.co.kr/api/auth/kakao/callback
   ```
3. **저장** 클릭

### 4단계: 동의항목 설정

1. **제품 설정** → **카카오 로그인** → **동의항목** 메뉴
2. 다음 항목 활성화:
   - ✅ **닉네임** (필수)
   - ✅ **프로필 사진** (선택)
   - ✅ **카카오계정(이메일)** (선택)
3. **저장** 클릭

### 5단계: 앱 상태 확인

1. **앱 설정** → **앱 키** 메뉴
2. **REST API 키** 확인:
   ```
   2b4a37bb18a276469b69bf3d8627e425
   ```
3. 이 키가 `config/kakao.php`에 설정되어 있는지 확인

## 🔍 체크리스트

다음 항목을 모두 확인하세요:

- [ ] **카카오 로그인 제품 활성화**: 제품 설정 → 카카오 로그인 → 활성화 설정 ON
- [ ] **Web 플랫폼 등록**: 앱 설정 → 플랫폼 → Web 플랫폼 등록됨
- [ ] **Redirect URI 등록**: 제품 설정 → 카카오 로그인 → Redirect URI 등록됨
- [ ] **동의항목 설정**: 제품 설정 → 카카오 로그인 → 동의항목 활성화됨
- [ ] **REST API 키 확인**: 앱 설정 → 앱 키 → REST API 키 확인
- [ ] **설정 파일 확인**: `config/kakao.php`에 REST API 키가 올바르게 설정됨

## 🧪 테스트 방법

### 1. 설정 확인 페이지

```
http://ailand.dothome.co.kr/api/auth/test.php
```

이 페이지에서:
- REST API 키가 설정되어 있는지 확인
- Redirect URI가 올바른지 확인
- "카카오 로그인 테스트" 버튼으로 바로 테스트

### 2. 카카오 로그인 URL 직접 확인

브라우저에서 다음 URL을 열어보세요:
```
https://kauth.kakao.com/oauth/authorize?client_id=2b4a37bb18a276469b69bf3d8627e425&redirect_uri=http://ailand.dothome.co.kr/api/auth/kakao/callback&response_type=code&scope=profile_nickname,profile_image,account_email
```

**정상 작동 시**: 카카오 로그인 페이지가 나타납니다.
**오류 발생 시**: 오류 메시지가 표시됩니다.

## ⚠️ 자주 발생하는 오류

### 오류 1: "redirect_uri_mismatch"

**원인**: Redirect URI가 카카오 개발자 콘솔에 등록되지 않음

**해결**:
- 제품 설정 → 카카오 로그인 → Redirect URI에 정확히 등록
- HTTP/HTTPS, 도메인, 경로가 정확히 일치해야 함

### 오류 2: "invalid_client"

**원인**: REST API 키가 잘못되었거나 앱이 비활성화됨

**해결**:
- 앱 설정 → 앱 키에서 REST API 키 확인
- 앱 상태가 "운영" 또는 "개발"로 설정되어 있는지 확인

### 오류 3: "insufficient_scope"

**원인**: 필요한 동의 항목이 활성화되지 않음

**해결**:
- 제품 설정 → 카카오 로그인 → 동의항목에서 필수 항목 활성화

### 오류 4: "REST API가 연동되어 있지 않습니다"

**원인**: 카카오 로그인 제품이 활성화되지 않음

**해결**:
- 제품 설정 → 카카오 로그인 → 활성화 설정을 ON으로 변경
- Web 플랫폼이 등록되어 있는지 확인

## 📞 추가 도움

문제가 계속되면:
1. 카카오 개발자 콘솔의 **앱 설정** → **앱 상태** 확인
2. **앱 키** → **REST API 키**가 올바른지 확인
3. **제품 설정** → **카카오 로그인** → 모든 설정이 완료되었는지 확인
